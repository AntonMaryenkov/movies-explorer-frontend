(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],Array(18).concat([function(e,t,a){},,function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"BASE_URL",(function(){return Q})),a.d(n,"setToken",(function(){return X})),a.d(n,"register",(function(){return Y})),a.d(n,"authorize",(function(){return ee})),a.d(n,"getContent",(function(){return te})),a.d(n,"addUserInfo",(function(){return ae})),a.d(n,"getMovies",(function(){return ne})),a.d(n,"postMovies",(function(){return ie})),a.d(n,"deleteMovies",(function(){return oe}));var i=a(1),o=a.n(i),c=a(21),s=a.n(c),r=a(5),l=(a(27),a(10)),u=a(2),j=a(3),m=(a(28),a(18),a(29),a(30),a(0)),d=function(){return Object(m.jsx)("div",{className:"preloader",children:Object(m.jsx)("div",{className:"preloader__container",children:Object(m.jsx)("span",{className:"preloader__round"})})})};var b=function(e){var t="form__title ".concat(e.loggedIn?"form__title_profile":"");return Object(m.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.onSubmit()},children:[e.preloader&&Object(m.jsx)(d,{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h6",{className:t,children:e.title}),e.children]}),Object(m.jsxs)("div",{className:"form__nav",children:[!e.loggedIn&&Object(m.jsxs)("div",{children:[e.formMessage&&Object(m.jsx)("span",{className:"form__message",children:e.formMessage}),!e.showButton&&Object(m.jsx)("button",{disabled:!0,className:"form__button",children:e.buttonName}),e.showButton&&Object(m.jsx)("button",{className:"form__button form__button_active",children:e.buttonName}),Object(m.jsxs)("div",{className:"form__container_link",children:[Object(m.jsx)("p",{className:"form__link-text",children:e.linkText}),Object(m.jsx)(r.b,{to:e.linkRoute,className:"form__link",children:e.linkName})]})]}),e.loggedIn&&Object(m.jsxs)("div",{className:"form__nav-profile",children:[e.formMessage&&Object(m.jsx)("span",{className:"form__message",children:e.formMessage}),e.readOnly&&Object(m.jsxs)("div",{className:"form__nav-edit",children:[Object(m.jsx)("button",{className:"form__button-profile",onClick:function(){e.setReadOnly(!1)},children:e.buttonName}),Object(m.jsx)("div",{className:"form__container_link",children:Object(m.jsx)("button",{className:"form__button-profile form__link-profile",onClick:e.onSignOut,children:e.linkName})})]}),e.showButton&&!e.readOnly&&Object(m.jsx)("button",{className:"form__button form__button_active",children:e.buttonNameSave}),!e.showButton&&!e.readOnly&&Object(m.jsx)("button",{disabled:!0,className:"form__button",children:e.buttonNameSave})]})]})]})},h=a.p+"static/media/logo.047033fe.svg";a(37);var v=function(e){return Object(m.jsxs)("label",{className:"input-auth__field",children:[Object(m.jsx)("h6",{className:"input-auth__name",children:e.name}),Object(m.jsx)("input",{disabled:e.isDisabled,onFocus:e.onFocus,className:"input-auth__input",onChange:e.onChange,value:e.value,type:e.type,minLength:e.minLength,maxLength:e.maxLength,placeholder:e.placeholder,required:!0}),Object(m.jsxs)("span",{className:"input-auth__error",children:[e.isDirty&&e.valid.isEmpty&&e.valid.messageError,!e.valid.isEmpty&&e.valid.minLengthError&&e.valid.messageError,!e.valid.isEmpty&&e.valid.maxLengthError&&e.valid.messageError,!e.valid.isEmpty&&e.valid.emailError&&e.valid.messageError]})]})},_=a(9),f=function(e,t){var a=o.a.useState(e),n=Object(u.a)(a,2),c=n[0],s=n[1],r=function(e,t){var a=o.a.useState(!0),n=Object(u.a)(a,2),c=n[0],s=n[1],r=o.a.useState(!1),l=Object(u.a)(r,2),j=l[0],m=l[1],d=o.a.useState(!1),b=Object(u.a)(d,2),h=b[0],v=b[1],_=o.a.useState(!1),f=Object(u.a)(_,2),p=f[0],O=f[1],g=o.a.useState(!1),x=Object(u.a)(g,2),N=x[0],S=x[1],k=o.a.useState(""),y=Object(u.a)(k,2),E=y[0],M=y[1];return Object(i.useEffect)((function(){void 0!==t.emailError&&(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?O(!1):O(!0),M("\u041d\u0435\u043a\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email")),0===e.length?(s(!0),M("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")):s(!1),0!==e.length&&e.length<t.minLengthError?(m(!0),M("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 - ".concat(t.minLengthError))):m(!1),e.length>=t.maxLengthError?(v(!0),M("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 - ".concat(t.maxLengthError))):v(!1)}),[e]),Object(i.useEffect)((function(){S(!!(c||j||h||p))}),[c,j,h,p]),{messageError:E,isEmpty:c,minLengthError:j,maxLengthError:h,emailError:p,inputValid:N}}(c,t),l=o.a.useState(!1),j=Object(u.a)(l,2),m=j[0],d=j[1];Object(i.useEffect)((function(){s(e)}),[e]);return Object(_.a)({value:c,isDirty:m,onChange:function(e){s(e.target.value)},onFocus:function(){d(!0)}},r)};var p=function(e){var t=o.a.useState(!1),a=Object(u.a)(t,2),n=a[0],c=a[1],s=o.a.useState(!1),r=Object(u.a)(s,2),l=r[0],j=r[1],d=o.a.useState(""),_=Object(u.a)(d,2),p=_[0],O=_[1],g=f("",{isEmpty:!0,minLengthError:2,maxLengthError:30}),x=f("",{isEmpty:!0,emailError:!1}),N=f("",{isEmpty:!0,minLengthError:8});return Object(i.useEffect)((function(){x.inputValid||N.inputValid||g.inputValid?j(!1):j(!0)}),[x.inputValid,N.inputValid,g.inputValid]),Object(m.jsx)("div",{className:"auth",children:Object(m.jsxs)("div",{className:"auth__form-container",children:[Object(m.jsx)("img",{className:"form__logo",src:h,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f"}),Object(m.jsxs)(b,{title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",buttonName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",linkText:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",linkName:"\u0412\u043e\u0439\u0442\u0438",linkRoute:"/signin",onSubmit:function(){c(!0),j(!1),e.onRegister(g.value,x.value,N.value).catch((function(){O("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451."),c(!1),j(!0)}))},showButton:l,preloader:n,formMessage:p,children:[Object(m.jsx)(v,{name:"name",minLength:"2",maxLength:"30",placeholder:"\u0418\u043c\u044f",onChange:g.onChange,onFocus:g.onFocus,isDirty:g.isDirty,value:g.value,valid:g,isDisabled:n,required:!0}),Object(m.jsx)(v,{name:"email",type:"email",placeholder:"Email",onChange:x.onChange,onFocus:x.onFocus,isDirty:x.isDirty,value:x.value,valid:x,isDisabled:n,required:!0}),Object(m.jsx)(v,{name:"password",type:"password",minLength:"8",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:N.onChange,onFocus:N.onFocus,isDirty:N.isDirty,value:N.value,valid:N,isDisabled:n,required:!0})]})]})})},O=(a(38),a.p+"static/media/navigation-icon.593c6330.svg");var g=function(e){var t=o.a.useState(!1),a=Object(u.a)(t,2),n=a[0],i=a[1];function c(){i(!1)}return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"navigation__container",children:[!e.loggedIn&&Object(m.jsxs)("div",{className:"navigation",children:[Object(m.jsx)(r.c,{to:"/signup",className:"navigation__button navigation__button_reg",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(m.jsx)(r.c,{to:"/signin",className:"navigation__button navigation__button_log",children:"\u0412\u043e\u0439\u0442\u0438"})]}),e.loggedIn&&Object(m.jsxs)("div",{className:"navigation",children:[Object(m.jsx)(r.c,{to:"/movies",className:"navigation__button navigation__button-logged",activeClassName:"navigation__button_active",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(m.jsx)(r.c,{to:"/saved-movies",className:"navigation__button navigation__button-logged",activeClassName:"navigation__button_active",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),Object(m.jsxs)(r.c,{to:"/profile",className:"navigation__button navigation__button-profile",children:[Object(m.jsx)("img",{className:"navigation__profile-icon",src:O,alt:"\u0438\u043a\u043e\u043d\u043a\u0430-\u0447\u0435\u043b\u043e\u0432\u0435\u043a"}),Object(m.jsx)("p",{className:"navigation__button-profile_text",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})]})]})]}),e.loggedIn&&Object(m.jsx)("button",{className:"navigation__icon",type:"button",onClick:function(){i(!0)}}),n&&Object(m.jsx)("div",{className:"navigation__popup-overlay",children:Object(m.jsxs)("div",{className:"navigation__popup",children:[Object(m.jsx)("button",{className:"navigation__close-icon",type:"button",onClick:c}),Object(m.jsxs)("div",{className:"navigation__popup-container",children:[Object(m.jsx)(r.c,{exact:!0,to:"/",className:"navigation__button navigation__button-logged navigation__button-logged_popup",activeClassName:"navigation__button-popup_active",onClick:c,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(m.jsx)(r.c,{to:"/movies",className:"navigation__button navigation__button-logged navigation__button-logged_popup",activeClassName:"navigation__button-popup_active",onClick:c,children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(m.jsx)(r.c,{to:"/saved-movies",className:"navigation__button navigation__button-logged navigation__button-logged_popup",activeClassName:"navigation__button-popup_active",onClick:c,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]}),Object(m.jsxs)(r.c,{to:"/profile",className:"navigation__button navigation__button-profile navigation__button-profile_popup",onClick:c,children:[Object(m.jsx)("img",{className:"navigation__profile-icon",src:O,alt:"\u0438\u043a\u043e\u043d\u043a\u0430-\u0447\u0435\u043b\u043e\u0432\u0435\u043a"}),Object(m.jsx)("p",{className:"navigation__button-profile_text",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})]})]})})]})};a(39);var x=function(e){var t="header ".concat(e.loggedIn?"header_logged":"");return Object(m.jsx)("header",{className:t,children:Object(m.jsxs)("div",{className:"header__container",children:[Object(m.jsx)("img",{className:"header__logo",src:h,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430"}),Object(m.jsx)(g,{loggedIn:e.loggedIn})]})})};a(40);var N=function(e){return Object(m.jsxs)("footer",{className:"footer",children:[Object(m.jsx)("p",{className:"footer__promo-text",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(m.jsxs)("div",{className:"footer__container",children:[Object(m.jsx)("p",{className:"footer__copyright",children:"\xa9 2020"}),Object(m.jsxs)("ul",{className:"footer__links",children:[Object(m.jsx)("li",{children:Object(m.jsx)("a",{className:"footer__link",href:"https://praktikum.yandex.ru/",target:"_blank",rel:"noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{className:"footer__link",href:"https://github.com/AntonMaryenkov",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{className:"footer__link",href:"https://www.facebook.com/viasacro",target:"_blank",rel:"noreferrer",children:"Facebook"})})]})]})]})},S=a.p+"static/media/promo-logo.5a35c432.png";a(41);var k=function(e){return Object(m.jsxs)("div",{className:"promo",children:[Object(m.jsxs)("div",{className:"promo__info-container",children:[Object(m.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431\u2011\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."}),Object(m.jsx)("p",{className:"promo__subtitle",children:"\u041b\u0438\u0441\u0442\u0430\u0439\u0442\u0435 \u043d\u0438\u0436\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u0440\u043e \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442 \u0438 \u0435\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f."}),Object(m.jsx)("a",{className:"promo__link",href:"#about-project",children:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"})]}),Object(m.jsx)("img",{className:"promo__logo",src:S,alt:""})]})};a(42);var y=function(e){return Object(m.jsx)("h2",{className:"title",children:e.title})};a(43);var E=function(e){return Object(m.jsxs)("div",{id:"about-project",className:"about-project",children:[Object(m.jsx)(y,{title:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(m.jsxs)("div",{className:"about-project__info",children:[Object(m.jsxs)("div",{className:"about-project__info_block",children:[Object(m.jsx)("h3",{className:"about-project__info_title",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(m.jsx)("p",{className:"about-project__info_text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(m.jsxs)("div",{className:"about-project__info_block",children:[Object(m.jsx)("h3",{className:"about-project__info_title",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(m.jsx)("p",{className:"about-project__info_text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]})]}),Object(m.jsxs)("div",{className:"about-project__time",children:[Object(m.jsxs)("div",{className:"about-project__time_column about-project__time_column-back",children:[Object(m.jsx)("p",{className:"about-project__time-text about-project__time-text_back",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(m.jsx)("p",{className:"about-project__tech about-project__tech_back",children:"Back-end"})]}),Object(m.jsxs)("div",{className:"about-project__time_column about-project__time_column-front",children:[Object(m.jsx)("p",{className:"about-project__time-text about-project__time-text_front",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(m.jsx)("p",{className:"about-project__tech about-project__tech_front",children:"Front-end"})]})]})]})};a(44);var M=function(e){return Object(m.jsxs)("div",{className:"techs",children:[Object(m.jsx)(y,{title:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(m.jsx)("h4",{className:"techs__title",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(m.jsx)("p",{className:"techs__subtitle",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(m.jsxs)("div",{className:"techs__list",children:[Object(m.jsx)("div",{className:"techs__element",children:"HTML"}),Object(m.jsx)("div",{className:"techs__element",children:"CSS"}),Object(m.jsx)("div",{className:"techs__element",children:"JS"}),Object(m.jsx)("div",{className:"techs__element",children:"React"}),Object(m.jsx)("div",{className:"techs__element",children:"Git"}),Object(m.jsx)("div",{className:"techs__element",children:"Express.js"}),Object(m.jsx)("div",{className:"techs__element",children:"mongoDB"})]})]})},C=(a(45),a.p+"static/media/aboutMePhoto.4f328356.jpg");var L=function(e){return Object(m.jsxs)("div",{className:"about-me",children:[Object(m.jsx)(y,{title:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(m.jsxs)("div",{className:"about-me__container",children:[Object(m.jsxs)("div",{className:"about-me__info",children:[Object(m.jsx)("h5",{className:"about-me__title",children:"\u0410\u043d\u0442\u043e\u043d"}),Object(m.jsx)("p",{className:"about-me__subtitle",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 30 \u043b\u0435\u0442"}),Object(m.jsx)("p",{className:"about-me__text",children:"\u042f \u0440\u043e\u0434\u0438\u043b\u0441\u044f \u0438 \u0436\u0438\u0432\u0443 \u0432 \u0421\u0430\u0440\u0430\u0442\u043e\u0432\u0435, \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0421\u0413\u0423. \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u0436\u0435\u043d\u0430 \u0438 \u0434\u043e\u0447\u044c. \u042f \u043b\u044e\u0431\u043b\u044e \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043c\u0443\u0437\u044b\u043a\u0443, \u0430 \u0435\u0449\u0451 \u0443\u0432\u043b\u0435\u043a\u0430\u044e\u0441\u044c \u0431\u0435\u0433\u043e\u043c. \u041d\u0435\u0434\u0430\u0432\u043d\u043e \u043d\u0430\u0447\u0430\u043b \u043a\u043e\u0434\u0438\u0442\u044c. \u0421 2015 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \xab\u0421\u041a\u0411 \u041a\u043e\u043d\u0442\u0443\u0440\xbb. \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u0440\u043e\u0448\u0451\u043b \u043a\u0443\u0440\u0441 \u043f\u043e \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435, \u043d\u0430\u0447\u0430\u043b \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0444\u0440\u0438\u043b\u0430\u043d\u0441-\u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0438 \u0443\u0448\u0451\u043b \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b."}),Object(m.jsxs)("ul",{className:"about-me__links",children:[Object(m.jsx)("li",{children:Object(m.jsx)("a",{className:"about-me__link",href:"https://github.com/AntonMaryenkov",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(m.jsx)("li",{children:Object(m.jsx)("a",{className:"about-me__link",href:"https://www.facebook.com/viasacro",target:"_blank",rel:"noreferrer",children:"Facebook"})})]})]}),Object(m.jsx)("img",{className:"about-me__photo",src:C,alt:"\u043c\u043e\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f"})]})]})};a(46);var I=function(e){return Object(m.jsxs)("div",{className:"portfolio",children:[Object(m.jsx)("h6",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(m.jsxs)("ul",{className:"portfolio__links",children:[Object(m.jsx)("li",{className:"portfolio__link-element",children:Object(m.jsxs)("a",{className:"portfolio__link",href:"https://github.com/AntonMaryenkov/first-project",target:"_blank",rel:"noreferrer",children:[Object(m.jsx)("p",{className:"portfolio__link_text",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(m.jsx)("div",{className:"portfolio__link_icon"})]})}),Object(m.jsx)("li",{className:"portfolio__link-element",children:Object(m.jsxs)("a",{className:"portfolio__link",href:"https://antonmaryenkov.github.io/russian-travel",target:"_blank",rel:"noreferrer",children:[Object(m.jsx)("p",{className:"portfolio__link_text",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(m.jsx)("div",{className:"portfolio__link_icon"})]})}),Object(m.jsx)("li",{className:"portfolio__link-element",children:Object(m.jsxs)("a",{className:"portfolio__link",href:"https://mesto.antonmaryenkov.students.nomoredomains.icu",target:"_blank",rel:"noreferrer",children:[Object(m.jsx)("p",{className:"portfolio__link_text",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(m.jsx)("div",{className:"portfolio__link_icon"})]})})]})]})};a(47);var w=function(e){return Object(m.jsxs)("main",{className:"main",children:[Object(m.jsx)(k,{}),Object(m.jsx)(E,{}),Object(m.jsx)(M,{}),Object(m.jsx)(L,{}),Object(m.jsx)(I,{})]})};a(20),a(48);var D=function(e){var t=o.a.useState(!1),a=Object(u.a)(t,2),n=a[0],i=a[1],c=o.a.useState(""),s=Object(u.a)(c,2),r=s[0],l=s[1],j=f(e.searchString,{isEmpty:!0});return o.a.useEffect((function(){j.inputValid?i(!1):i(!0)}),[j.inputValid]),Object(m.jsx)("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),j.inputValid?l("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"):e.searchSubmit(j.value)},children:Object(m.jsxs)("div",{className:"search-form__container",children:[Object(m.jsxs)("label",{className:"search-form__field search-form__field_search",children:[Object(m.jsx)("input",{className:"search-form__input",type:"search",placeholder:"\u0424\u0438\u043b\u044c\u043c",onChange:j.onChange,onFocus:j.onFocus,value:j.value,valid:j}),!n&&Object(m.jsx)("button",{className:"search-form__button search-form__button_disabled",type:"submit"}),n&&Object(m.jsx)("button",{className:"search-form__button",type:"submit"}),r&&Object(m.jsx)("span",{className:"search-form__message",children:r})]}),Object(m.jsxs)("label",{className:"search-form__field search-form__field_checkbox",children:[Object(m.jsx)("p",{className:"search-form__checkbox-name",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"}),Object(m.jsx)("input",{className:"search-form__checkbox",type:"checkbox",onChange:function(){return e.shortFilm?e.setShortFilm(!1):e.setShortFilm(!0)}}),Object(m.jsx)("div",{className:"search-form__switch"})]})]})})},F=a(13);a(49),a(50);var T=function(e){var t="movies-card__like ".concat(e.isLiked?"movies-card__like_active":"");function a(){if(e.pageSavedMovies)return window.open(e.trailer);window.open(e.trailerLink)}return Object(m.jsxs)("div",{className:"movies-card",children:[e.pageSavedMovies?Object(m.jsx)("img",{className:"movies-card__img",src:e.image,onClick:a,alt:""}):Object(m.jsx)("img",{className:"movies-card__img",src:"https://api.nomoreparties.co".concat(e.image&&e.image.url),onClick:a,alt:""}),Object(m.jsxs)("div",{className:"movies-card__container_title-like",children:[Object(m.jsx)("h6",{className:"movies-card__title",children:e.nameRU}),e.pageSavedMovies?Object(m.jsx)("button",{className:"movies-card__button-delete",onClick:function(){e.deleteMovie(e.movieId)}}):Object(m.jsx)("button",{className:t,onClick:function(){e.isLiked?e.deleteMovie(e.id):e.saveMovie(e)}})]}),Object(m.jsx)("p",{className:"movies-card__time",children:function(e){var t=Math.trunc(e/60),a=e%60;return t>0?t+"\u0447 "+a+"\u043c":a+"\u043c"}(e.duration)})]})};var R=function(e){var t="movies-card-list ".concat(e.savedMovies?"movies-card-list_saved":"");return Object(m.jsxs)("div",{className:"movies-card-list__container",children:[e.preloader&&Object(m.jsx)(d,{}),e.messageError&&Object(m.jsx)("span",{className:"movies-card-list__message-error",children:e.messageError}),Object(m.jsxs)("div",{className:t,children:[!e.pageSavedMovies&&e.movies.map((function(t){var a=t.id,n=Object(F.a)(t,["id"]);return Object(m.jsx)(T,Object(_.a)(Object(_.a)({id:a},n),{},{saveMovie:e.saveMovie,deleteMovie:e.deleteMovie}),a)})),e.pageSavedMovies&&e.movies.map((function(t){var a=t._id,n=Object(F.a)(t,["_id"]);return Object(m.jsx)(T,Object(_.a)(Object(_.a)({id:a},n),{},{saveMovie:e.saveMovie,deleteMovie:e.deleteMovie,pageSavedMovies:e.pageSavedMovies}),a)}))]}),e.showButtons&&Object(m.jsx)("button",{className:"movies-card-list__button",onClick:e.nextPageMovies,children:"\u0415\u0449\u0451"})]})},B="allMovies",P="searchMovies",V="searchSavedMovies",A=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BASE_URL||"http://api.movies-explorer.antonmaryenkov.ru";function U(e,t,a,n){var i=e.filter((function(e){return e.nameRU.toLowerCase().includes(t)}));return n&&i.forEach((function(e){e.isLiked=n.some((function(t){return e.id===t.movieId}))})),a&&(i=i.filter((function(e){return e.duration<=40}))),i}var z=function(e){var t=o.a.useState(!1),a=Object(u.a)(t,2),n=a[0],i=a[1],c=o.a.useState(""),s=Object(u.a)(c,2),r=s[0],l=s[1],j=o.a.useState([]),d=Object(u.a)(j,2),b=d[0],h=d[1],v=o.a.useState(0),_=Object(u.a)(v,2),f=_[0],p=_[1],O=o.a.useState(0),g=Object(u.a)(O,2),x=g[0],N=g[1],S=o.a.useState(0),k=Object(u.a)(S,2),y=k[0],E=k[1],M=o.a.useState(!1),C=Object(u.a)(M,2),L=C[0],I=C[1],w=o.a.useState(""),F=Object(u.a)(w,2),T=F[0],V=F[1],A=o.a.useState(!1),z=Object(u.a)(A,2),J=z[0],q=z[1];function W(e){x+f*y>=e.length||0===e.length?q(!1):q(!0)}return o.a.useEffect((function(){function e(){window.innerWidth>1100&&(N(12),E(4)),window.innerWidth<=1100&&(N(12),E(3)),window.innerWidth<=768&&(N(8),E(2)),window.innerWidth<=425&&(N(5),E(2))}var t;function a(){t||(t=setTimeout((function(){t=null,e()}),2e3))}return e(),window.addEventListener("resize",a),localStorage.getItem(P)&&V(localStorage.getItem(P)),function(){clearTimeout(t),window.removeEventListener("resize",a)}}),[]),o.a.useEffect((function(){l("");var t=U(e.movies,T,L,e.savedMovies);0===t.length&&l("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),h(t),W(t)}),[e.savedMovies,e.movies,L,T]),o.a.useEffect((function(){W(b)}),[f]),Object(m.jsxs)("div",{className:"movies",children:[Object(m.jsx)(D,{searchSubmit:function(t){if(l(""),i(!0),e.movies.length){var a=U(e.movies,t,L,e.savedMovies);localStorage.setItem(P,t),0===a.length&&l("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),h(a),V(t),i(!1)}else fetch("".concat("https://api.nomoreparties.co","/beatfilm-movies"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(a){if(0===a.length)return l("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");localStorage.setItem(P,t),localStorage.setItem(B,JSON.stringify(a)),e.setMovies(a),V(t)})).catch((function(e){console.log(e),l("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")})).finally((function(){i(!1)}));p(0)},setShortFilm:I,shortFilm:L,searchString:T}),Object(m.jsx)(R,{pageSavedMovies:e.pageSavedMovies,movies:b.slice(0,x+f*y),saveMovie:function(t){i(!0),e.saveMovie(t).finally((function(){i(!1)}))},deleteMovie:function(t){i(!0),e.deleteMovie(t).finally((function(){i(!1)}))},nextPageMovies:function(){b.length>0&&p(f+1)},showButtons:J,messageError:r,preloader:n})]})};var J=function(e){var t=o.a.useState(""),a=Object(u.a)(t,2),n=a[0],i=a[1],c=o.a.useState(!1),s=Object(u.a)(c,2),r=s[0],l=s[1],j=o.a.useState([]),d=Object(u.a)(j,2),b=d[0],h=d[1],v=o.a.useState(!1),_=Object(u.a)(v,2),f=_[0],p=_[1],O=o.a.useState(""),g=Object(u.a)(O,2),x=g[0],N=g[1];return o.a.useEffect((function(){localStorage.getItem(V)&&N(localStorage.getItem(V))}),[]),o.a.useEffect((function(){i("");var t=U(e.savedMovies,x,f);0===t.length&&i("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),h(t)}),[f,e.savedMovies]),Object(m.jsxs)("div",{className:"movies",children:[Object(m.jsx)(D,{searchSubmit:function(t){i("");var a=U(e.savedMovies,t,f);0===a.length&&i("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),h(a),localStorage.setItem(V,t),N(t)},setShortFilm:p,shortFilm:f,searchString:x}),Object(m.jsx)(R,{pageSavedMovies:e.pageSavedMovies,movies:b,deleteMovie:function(t){l(!0),e.deleteMovie(t).finally((function(){l(!1)}))},messageError:n,preloader:r})]})},q=(a(51),o.a.createContext());a(52);var W=function(e){return Object(m.jsxs)("label",{className:"input-profile__field",children:[Object(m.jsx)("input",{className:"input-profile__input",type:e.type,value:e.value,onChange:e.onChange,minLength:e.minLength,maxLength:e.maxLength,placeholder:e.placeholder,readOnly:e.readOnly,disabled:e.isDisabled,required:!0}),Object(m.jsx)("h6",{className:"input-profile__name",children:e.name}),Object(m.jsxs)("span",{className:"input-profile__error",children:[e.isDirty&&e.valid.isEmpty&&e.valid.messageError,!e.valid.isEmpty&&e.valid.minLengthError&&e.valid.messageError,!e.valid.isEmpty&&e.valid.maxLengthError&&e.valid.messageError,!e.valid.isEmpty&&e.valid.emailError&&e.valid.messageError]})]})};var G=function(e){var t=o.a.useContext(q),a=o.a.useState(!1),n=Object(u.a)(a,2),i=n[0],c=n[1],s=o.a.useState(!0),r=Object(u.a)(s,2),l=r[0],j=r[1],d=o.a.useState(!1),h=Object(u.a)(d,2),v=h[0],_=h[1],p=o.a.useState(!1),O=Object(u.a)(p,2),g=O[0],x=O[1],N=o.a.useState(""),S=Object(u.a)(N,2),k=S[0],y=S[1],E=f(t.name,{isEmpty:!0,minLengthError:2,maxLengthError:30}),M=f(t.email,{isEmpty:!0,emailError:!1});return o.a.useEffect((function(){if(E.value===t.name&&M.value===t.email)return _(!1);M.inputValid||E.inputValid?_(!1):_(!0)}),[M.inputValid,E.inputValid,E.value,M.value]),o.a.useEffect((function(){(E.isDirty||M.isDirty)&&x(!0)}),[M.value,E.value]),Object(m.jsx)("div",{className:"profile",children:Object(m.jsx)("div",{className:"profile__form-container",children:Object(m.jsxs)(b,{title:"\u041f\u0440\u0438\u0432\u0435\u0442, ".concat(t.name,"!"),buttonName:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",buttonNameSave:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",linkName:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430",linkRoute:"/",loggedIn:e.loggedIn,readOnly:l,setReadOnly:j,onSignOut:e.onSignOut,onSubmit:function(){c(!0),_(!1),e.Auth.addUserInfo(E.value,M.value).then((function(t){e.setCurrentUser(t),j(!0),y("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e")})).catch((function(e){y("\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),console.log(e)})).finally((function(){c(!1)}))},showButton:v,changeValue:g,formMessage:k,preloader:i,children:[Object(m.jsx)(W,{name:"\u0418\u043c\u044f",minLength:"2",maxLength:"30",readOnly:l,setReadOnly:j,onChange:E.onChange,onFocus:E.onFocus,isDirty:E.isDirty,value:E.value,valid:E,isDisabled:i}),Object(m.jsx)("div",{className:"profile__border"}),Object(m.jsx)(W,{name:"Email",type:"email",readOnly:l,setReadOnly:j,onChange:M.onChange,onFocus:M.onFocus,isDirty:M.isDirty,value:M.value,valid:M,isDisabled:i})]})})})},H=function(e){var t=e.component,a=Object(F.a)(e,["component"]);return Object(m.jsx)(j.b,{path:a.path,children:function(){return a.loggedIn?Object(m.jsx)(t,Object(_.a)({},a)):Object(m.jsx)(j.a,{to:"/"})}})};var K=function(e){var t=o.a.useState(!1),a=Object(u.a)(t,2),n=a[0],c=a[1],s=o.a.useState(!1),r=Object(u.a)(s,2),l=r[0],j=r[1],d=o.a.useState(""),_=Object(u.a)(d,2),p=_[0],O=_[1],g=f("",{isEmpty:!0,emailError:!1}),x=f("",{isEmpty:!0,minLengthError:8});return Object(i.useEffect)((function(){g.inputValid||x.inputValid?j(!1):j(!0)}),[g.inputValid,x.inputValid]),Object(m.jsx)("div",{className:"auth",children:Object(m.jsxs)("div",{className:"auth__form-container",children:[Object(m.jsx)("img",{className:"form__logo",src:h,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f"}),Object(m.jsxs)(b,{title:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",buttonName:"\u0412\u043e\u0439\u0442\u0438",linkText:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",linkName:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",linkRoute:"/signup",onSubmit:function(){c(!0),j(!1),e.onLogin(g.value,x.value).catch((function(){O("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),c(!1),j(!0)}))},showButton:l,preloader:n,formMessage:p,children:[Object(m.jsx)(v,{name:"email",type:"email",placeholder:"Email",onChange:g.onChange,onFocus:g.onFocus,isDirty:g.isDirty,value:g.value,valid:g,required:!0,isDisabled:n}),Object(m.jsx)(v,{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:x.onChange,onFocus:x.onFocus,isDirty:x.isDirty,value:x.value,valid:x,required:!0,isDisabled:n})]})]})})};a(53);var Z,$=function(e){var t=Object(j.g)();return Object(m.jsxs)("div",{className:"not-found",children:[Object(m.jsx)("h1",{className:"not-found__title",children:"404"}),Object(m.jsx)("p",{className:"not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(m.jsx)("button",{className:"not-found__button_back",onClick:function(){return t.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})},Q=A;function X(e){Z=e}var Y=function(e,t,a){return fetch("".concat(Q,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:a})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},ee=function(e,t){return fetch("".concat(Q,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){if(e)return localStorage.setItem("token",e.token),X(e.token),e}))},te=function(){return fetch("".concat(Q,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},ae=function(e,t){return fetch("".concat(Q,"/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)},body:JSON.stringify({name:e,email:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},ne=function(){return fetch("".concat(Q,"/movies"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},ie=function(e){var t=e.country,a=e.director,n=e.duration,i=e.year,o=e.description,c=e.image,s=e.trailer,r=e.movieId,l=e.nameRU,u=e.nameEN,j=e.thumbnail;return fetch("".concat(Q,"/movies"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)},body:JSON.stringify({country:t,director:a,duration:n,year:i,description:o,image:c,trailer:s,movieId:r,nameRU:l,nameEN:u,thumbnail:j})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},oe=function(e){return fetch("".concat(Q,"/movies/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)},body:JSON.stringify({id:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))};var ce=Object(j.h)((function(){var e,t=o.a.useState(!1),a=Object(u.a)(t,2),i=a[0],c=(a[1],o.a.useState({name:"\u0418\u043c\u044f",email:"email"})),s=Object(u.a)(c,2),r=s[0],b=s[1],h=o.a.useState([]),v=Object(u.a)(h,2),_=v[0],f=v[1],O=o.a.useState([]),g=Object(u.a)(O,2),S=g[0],k=g[1],y=o.a.useState(!1),E=Object(u.a)(y,2),M=E[0],C=E[1],L=o.a.useState(!1),I=Object(u.a)(L,2),D=(I[0],I[1],o.a.useState(!1)),F=Object(u.a)(D,2),T=F[0],R=F[1],A=Object(j.g)();o.a.useEffect((function(){var e=localStorage.getItem("token");e?(X(e),te(e).then((function(e){e&&(b(e),C(!0))})).catch((function(e){return console.log(e)})).finally((function(){R(!0)}))):R(!0)}),[M]);var U=function(e,t){return ee(e,t).then((function(e){e.token&&(C(!0),A.push("/movies"))})).catch((function(e){return console.log(e),Promise.reject(e)})).finally((function(){R(!0)}))};function W(e){var t;return S.some((function(a){if(a.movieId===e)return t=a._id,!0})),t?oe(t).then((function(){k(S.filter((function(t){return t.movieId!==e})))})).catch((function(e){console.log(e)})):Promise.resolve()}return o.a.useEffect((function(){M&&(localStorage.getItem(B)&&f(JSON.parse(localStorage.getItem(B))),ne().then((function(e){k(e)})).catch((function(e){console.log(e)})))}),[M]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(j.b,{exact:!0,path:["/saved-movies","/movies","/","/profile"],children:Object(m.jsx)(x,{loggedIn:M})}),!T&&Object(m.jsx)(d,{}),T&&Object(m.jsx)(q.Provider,{value:r,children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{path:"/signup",children:M?Object(m.jsx)(j.a,{to:"/profile"}):Object(m.jsx)(p,{onRegister:function(e,t,a){return Y(e,t,a).then((function(){return U(t,a)})).catch((function(e){return console.log(e),Promise.reject(e)}))}})}),Object(m.jsx)(j.b,{path:"/signin",children:M?Object(m.jsx)(j.a,{to:"/profile"}):Object(m.jsx)(K,{onLogin:U})}),Object(m.jsx)(j.b,{exact:!0,path:"/",children:Object(m.jsx)(w,{})}),Object(m.jsx)(j.b,{path:"/movies",children:Object(m.jsx)(H,(e={path:"/movies",loggedIn:M,component:z,pageSavedMovies:i},Object(l.a)(e,"loggedIn",M),Object(l.a)(e,"saveMovie",(function(e){var t={country:e.country,director:e.director,duration:e.duration,year:e.year,description:e.description,image:"https://api.nomoreparties.co".concat(e.image.url),trailer:e.trailerLink,movieId:e.id,nameRU:e.nameRU,nameEN:e.nameEN,thumbnail:"https://api.nomoreparties.co".concat(e.image.formats.thumbnail.url)};return ie(t).then((function(t){var a=_.map((function(t){return t.id===e.id&&(t.isLiked=!0),t}));f(a),S.push(t),k(S.slice(0))})).catch((function(e){console.log(e)}))})),Object(l.a)(e,"deleteMovie",W),Object(l.a)(e,"savedMovies",S),Object(l.a)(e,"movies",_),Object(l.a)(e,"setMovies",f),e))}),Object(m.jsx)(j.b,{path:"/saved-movies",children:Object(m.jsx)(H,{path:"/saved-movies",loggedIn:M,component:J,pageSavedMovies:!i,savedMovies:S,deleteMovie:W})}),Object(m.jsx)(j.b,{path:"/profile",children:Object(m.jsx)(H,{path:"/profile",loggedIn:M,component:G,onSignOut:function(){localStorage.removeItem("token"),localStorage.removeItem(B),localStorage.removeItem(P),localStorage.removeItem(V),f([]),k([]),X(""),C(!1),A.push("/")},Auth:n,setCurrentUser:b})}),Object(m.jsx)(j.b,{path:"*",children:Object(m.jsx)($,{})})]})}),Object(m.jsx)(j.b,{exact:!0,path:["/saved-movies","/movies","/"],children:Object(m.jsx)(N,{})})]})}));s.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(r.a,{children:Object(m.jsx)(ce,{})})}),document.getElementById("root"))}]),[[54,1,2]]]);
//# sourceMappingURL=main.616a7621.chunk.js.map